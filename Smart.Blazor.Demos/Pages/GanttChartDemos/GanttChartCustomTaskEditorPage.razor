@page "/ganttchart-custom-task-editor"

@using Smart.Blazor.Demos.Data
@using System.Linq;
@using System.Text.Json;
@inject RandomDataService RandomDataService


<style>
    /* This is the CSS used in the demo */
    smart-gantt-chart {
        height: auto;
        --smart-gantt-chart-task-default-height: 50px;
        --smart-gantt-chart-selection: rgba(0,199,181,.2);
        --smart-gantt-chart-selection-color: black;
        --smart-gantt-chart-hover: rgba(0,199,181,.2);
        --smart-gantt-chart-hover-color: black;
        --smart-gantt-chart-timeline-nonworking-color: repeating-linear-gradient( 45deg, #FFADAF, #FFADAF 10px, #FF8181 10px, #FF8181 20px);
        --smart-gantt-chart-task-default-label-color: white;
    }

        smart-gantt-chart .john {
            --smart-gantt-chart-task-default-color: rgb(124, 175, 199);
        }

        smart-gantt-chart .jane {
            --smart-gantt-chart-task-default-color: rgb(124, 130, 199);
        }

        smart-gantt-chart .peter {
            --smart-gantt-chart-task-default-color: rgb(163, 124, 199);
        }

        smart-gantt-chart .melania {
            --smart-gantt-chart-task-default-color: rgb(199, 124, 190);
        }

        smart-gantt-chart .donald {
            --smart-gantt-chart-task-default-color: rgb(199, 124, 145);
        }
</style>

<Example Name="GanttChart">
    <p>Gantt Chart in this example represents the working hours of the employees of a small company. Note that 12 PM is a non-working hour.</p>

    <GanttChart DataSource="Records" TaskColumns="taskColumns" DurationUnit="Duration.Hour" View="GanttChartView.Day" NonworkingHours="nonworkingHours"/>
</Example>

@code {
    List<object> nonworkingHours = new List<object>() { 12 };

    List<GanttChartTaskColumn> taskColumns = new List<GanttChartTaskColumn>
    {
        new GanttChartTaskColumn() {
            Label = "Tasks",
            Value = "label",
            Size = "35%"
        },
        new GanttChartTaskColumn() {
            Label = "Start Date",
            Value = "dateStart",
            Size = "35%"
        },
        new GanttChartTaskColumn() {
            Label = "Duration (Hours)",
            Value = "duration"
        }
    };

    public List<GanttDataRecord> Records;

    protected override void OnInitialized()
    {
        Records = new List<GanttDataRecord>()
        {
            new GanttDataRecord()
            {
                Label = "John",
                DateStart = "2021-06-17T06:30:00",
                Connections = new List<Dictionary<string, int>>()
                {
                    new Dictionary<string, int>()
                    {
                        { "target", 1 }, { "type", 1 }
                    }
                },
                Duration = 8,
                Class = "john",
                Type = "task"
            },
            new GanttDataRecord()
            {
                Label = "Jane",
                DateStart = "2021-06-18T09:00:00",
                Connections = new List<Dictionary<string, int>>()
                {
                    new Dictionary<string, int>()
                    {
                        { "target", 2 }, { "type", 1 }
                    }
                },
                Duration = 8,
                Class = "jane",
                Type = "task"
            },
            new GanttDataRecord()
            {
                Label = "Peter",
                DateStart = "2021-06-19T07:30:00",
                Connections = new List<Dictionary<string, int>>()
                {
                    new Dictionary<string, int>()
                    {
                        { "target", 3 }, { "type", 1 }
                    }
                },
                Duration = 8,
                Class = "peter",
                Type = "task"
            },
            new GanttDataRecord()
            {
                Label = "Melania",
                DateStart = "2021-06-20T10:00:00",
                Connections = new List<Dictionary<string, int>>()
                {
                    new Dictionary<string, int>()
                    {
                        { "target", 4 }, { "type", 1 }
                    }
                },
                Duration = 8,
                Class = "melania",
                Type = "task"
            },
            new GanttDataRecord()
            {
                Label = "Donald",
                DateStart = "2021-06-21T08:30:00",
                Connections = new List<Dictionary<string, int>>()
                {
                    new Dictionary<string, int>()
                    {
                        { "target", 5 }, { "type", 1 }
                    }
                },
                Duration = 8,
                Class = "donald",
                Type = "task"
            }
        };
    }
}
